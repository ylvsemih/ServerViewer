@{
    ViewData["Title"] = "Home Page";
}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Charts Of Temperature and Moisture Graphs</title>

    <!-- Bootstrap -->
    <link href="../vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="../vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="../vendors/nprogress/nprogress.css" rel="stylesheet">
    <!-- Custom Theme Style -->
    <link href="../build/css/custom.min.css" rel="stylesheet">

    <!----------added----->
    <link href="../vendors/bootstrap-progressbar/css/bootstrap-progressbar-3.3.4.min.css" rel="stylesheet">
    <!-- bootstrap-daterangepicker -->
    <link href="../vendors/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet">

</head>

<body class="nav-md">
    <div class="container body">
        <div class="main_container">
            <div class="col-md-3 left_col">
                <div class="left_col scroll-view">
                    <div class="navbar nav_title" style="border: 0;">
                        <a href="/home/index" class="site_title"><i class="fa fa-pie-chart"></i> <span>RedBip</span></a>
                    </div>

                    <div class="clearfix"></div>

                    <!-- menu profile quick info -->
                    <div class="profile clearfix">

                        <div class="profile_info" id="welcome">

                            <h2></h2>
                        </div>
                    </div>
                    <!-- /menu profile quick info -->

                    <br />

                    <!-- sidebar menu -->
                    <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
                        <div class="menu_section">
                            <ul class="nav side-menu">
                                <li>
                                    <a href="/home/index" data-langkeyword="menudashboard"><i class="fa fa-home"></i> Arayüz <span></span></a>

                                </li>
                                <li>
                                    <a data-langkeyword="menudevices"><i class="fa fa-sitemap"></i> Cihazlarım <span class="fa fa-chevron-down"></span></a>
                                    <ul class="nav child_menu">
                                        <li>
                                            <a href="/home/Device_List" data-langkeyword="submenudevicelist">Cihaz Listesi</a>
                                        </li>

                                        <li>
                                            <a href="/home/device_logs" data-langkeyword="submenudevicelogs">Cihaz Bildirimler</a>
                                        </li>
                                        <li>
                                            <a href="/home/New_Device" data-langkeyword="submenunewdevice">Yeni Cihaz Kaydet</a>
                                        </li>
                                    </ul>
                                </li>

                                <li class="">
                                    <a data-langkeyword="menusettings"><i class="fa fa-edit"></i> Ayarlar <span class="fa fa-chevron-down"></span></a>
                                    <ul class="nav child_menu" style="display: none;">
                                        <li><a href="/home/OptionsDashboad" data-langkeyword="submenuthreshold">Eşik Ayarları</a></li>
                                        <li><a href="/home/OptionsDashboard_Notification" data-langkeyword="submenunotifications">Bildirim Seçenekleri</a></li>
                                        <li><a href="/home/OptionsDashboard_Notification2" data-langkeyword="submenuphoneconfig">Telefon Konfigrasyonu</a></li>


                                    </ul>
                                </li>

                            </ul>
                        </div>
                    </div>
                    <!-- sidebar menu -->
                    <!-- menu footer buttons -->
                    <div class="sidebar-footer hidden-small">
                        <a data-langkeyword="leftmenulogin" data-toggle="tooltip" data-placement="top" title="Login" href="/home/Register">
                            <span class="glyphicon glyphicon-log-in" aria-hidden="true"></span>
                        </a>

                        <a data-langkeyword="leftmenulogout" data-toggle="tooltip" data-placement="top" title="Logout" href="/home/logout">
                            <span class="glyphicon glyphicon-off" aria-hidden="true"></span>
                        </a>
                    </div>
                    <!-- menu footer buttons -->
                </div>
            </div>

            <!-- top navigation -->
            <div class="top_nav">
                <div class="nav_menu">
                    <div class="nav toggle">
                        <a id="menu_toggle"><i class="fa fa-bars"></i></a>


                    </div>

                    <nav class="nav navbar-nav">
                        <ul class=" navbar-right">
                            <li class="nav-item dropdown open" style="padding-left: 15px;">
                                <a href="javascript:;" class="user-profile dropdown-toggle" aria-haspopup="true" id="navbarDropdown" data-toggle="dropdown" aria-expanded="false">

                                </a>
                                <div class="dropdown-menu dropdown-usermenu pull-right" aria-labelledby="navbarDropdown">
                                    <a class="dropdown-item" href="/home/profile" data-langkeyword="righttopprofile"> Kullanıcı Bilgilerim</a>

                                    <a class="dropdown-item" href="/home/logout" data-langkeyword="righttoplogout"><i class="fa fa-sign-out pull-right"></i> Çıkış</a>
                                </div>
                            </li>

                            <li role="presentation" class="nav-item dropdown open">
                                <a href="javascript:;" class="dropdown-toggle info-number" id="navbarDropdown1" data-toggle="dropdown" aria-expanded="false">
                                    <i class="fa fa-envelope-o"></i>
                                    <span id="msgcount" class="badge bg-green"></span>
                                </a>
                                <ul class="dropdown-menu list-unstyled msg_list" role="menu" aria-labelledby="navbarDropdown1" id="msgBoxTop">
                                </ul>

                            </li>

                        </ul>
                    </nav>
                </div>
            </div>
            <!----Cihaz seçimi-->
            <div class="row  justify-content-center">
                <div class="btn-group " role="group" aria-label="Button group with nested dropdown">
                    <div class="btn-group" role="group">
                        <button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-langkeyword="dropdowndevicelist">
                            Cihazlar
                        </button>
                        <div class="dropdown-menu" aria-labelledby="btnGroupDrop1" id="mnav">
                        </div>
                    </div>

                </div>
            </div>
            <!-- top navigation -->
            <!-- page content -->
            <div class="right_col" role="main">
                <div class="">
                    <div class="page-title">
                        <div class="title_left" id="renamer">
                            <h3></h3>
                        </div>


                    </div>

                    <div class="clearfix"></div>

                    <div class="row">



                        <div class="col-md-4 col-sm-4 col-xs-12">
                            <div class="x_panel">
                                <div class="x_title">
                                    <h2 data-langkeyword="tempgauge">Sıcaklık Göstergesi</h2>
                                    <ul class="nav navbar-right panel_toolbox">
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                <a class="dropdown-item" href="home/OptionsDashboad">Eşik Ayarları</a>
                                                <a class="dropdown-item" href="home/OptionsDashboard_Notification">Bildirim Seçenekleri</a>
                                            </div>
                                        </li>
                                        <li>
                                            <a class="close-link"><i class="fa fa-close" align="right"></i></a>
                                        </li>

                                    </ul>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="x_content">
                                    <div id="GaugeTemp" style="height:300px;"></div>
                                </div>
                            </div>
                        </div>




                        <div class="col-md-4 col-sm-4 col-xs-12">
                            <div class="x_panel">
                                <div class="x_title">
                                    <h2 data-langkeyword="moisgauge">Nem Göstergesi</h2>
                                    <ul class="nav navbar-right panel_toolbox">
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                <a class="dropdown-item" href="home/OptionsDashboad">Eşik Ayarları</a>
                                                <a class="dropdown-item" href="home/OptionsDashboard_Notification">Bildirim Ayarları</a>
                                            </div>
                                        </li>
                                        <li>
                                            <a class="close-link"><i class="fa fa-close"></i></a>
                                        </li>
                                    </ul>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="x_content">
                                    <div id="GaugeMois" style="height:300px;"></div>
                                </div>
                            </div>
                        </div>


                    </div>
                    <!---------here------->
                    <div class="title_right">



                    </div>


                    <div class="title_right">
                        <div class="row">


                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <div class="dashboard_graph x_panel">

                                    <div class="col-md-6">
                                        <h2 data-langkeyword="tempdatatemplate">Sıcaklık Veri Grafiği</h2>
                                    </div>
                                    <div class="col-md-6">
                                        <div id="reportrange" class="pull-right" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc">
                                            <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
                                            <span>December 30, 2014 - January 28, 2015</span> <b class="caret"></b>
                                        </div>
                                    </div>

                                    <div class="x_content">
                                        <div class="demo-container" style="height:250px">
                                            <div id="chart_plot_03" class="demo-placeholder"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>

                    </div>


                    <div class="title_right">
                        <div class="row">


                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <div class="dashboard_graph x_panel">

                                    <div class="col-md-6">
                                        <h2 data-langkeyword="moisdatatemplate">Nem Veri Grafiği</h2>
                                    </div>
                                    <div class="col-md-6">
                                        <div id="reportrange2" class="pull-right" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc">
                                            <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
                                            <span>December 30, 2014 - January 28, 2015</span> <b class="caret"></b>
                                        </div>
                                    </div>

                                    <div class="x_content">
                                        <div class="demo-container" style="height:250px">
                                            <div id="chart_plot_04" class="demo-placeholder"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>

                    </div>

                </div>
            </div>


            <!-- page content -->
            <!-- footer content -->
            <footer>
                <div class="pull-right">
                    <a href="http://fosoft.com.tr/">Fosoft</a> ServerViewer Application All Rights Reserved 2019
                </div>
                <div class="clearfix"></div>
            </footer>
            <!-- footer content -->
        </div>
    </div>

    <!-- jQuery -->
    <script src="../vendors/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="../vendors/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <!-- FastClick -->
    <script src="../vendors/fastclick/lib/fastclick.js"></script>
    <!-- NProgress -->
    <script src="../vendors/nprogress/nprogress.js"></script>
    <!-- Chart.js -->
    <script src="../vendors/Chart.js/dist/Chart.min.js"></script>
    @*<script src="~/lib/jquery/jquery.js"></script>*@
    <!-- Custom Theme Scripts -->
    <script src="../build/js/custom.js"></script>   <!---custom.min.js di bu-->
    <!-- ECharts -->
    <script src="../vendors/echarts/dist/echarts.min.js"></script>
    <script src="../vendors/echarts/map/js/world.js"></script>
    @*<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>*@

    <!-- Flot -->
    <script src="../vendors/Flot/jquery.flot.js"></script>
    <script src="../vendors/Flot/jquery.flot.pie.js"></script>
    <script src="../vendors/Flot/jquery.flot.time.js"></script>
    <script src="../vendors/Flot/jquery.flot.stack.js"></script>
    <script src="../vendors/Flot/jquery.flot.resize.js"></script>
    <!-- Flot plugins -->
    <script src="../vendors/flot.orderbars/js/jquery.flot.orderBars.js"></script>
    <script src="../vendors/flot-spline/js/jquery.flot.spline.min.js"></script>
    <script src="../vendors/flot.curvedlines/curvedLines.js"></script>
    <script src="../vendors/moment/min/moment.min.js"></script>
    <script src="../vendors/bootstrap-daterangepicker/daterangepicker.js"></script>
    <!-- DateJS -->
    <script src="../vendors/DateJS/build/date.js"></script>

    <script src="../language.js"></script>
    <script type="text/javascript">

        var theme = {
            color: [
                '#26B99A', '#34495E', '#BDC3C7', '#3498DB',
                '#9B59B6', '#8abb6f', '#759c6a', '#bfd3b7'
            ],

            title: {
                itemGap: 8,
                textStyle: {
                    fontWeight: 'normal',
                    color: '#408829'
                }
            },

            dataRange: {
                color: ['#1f610a', '#97b58d']
            },

            toolbox: {
                color: ['#408829', '#408829', '#408829', '#408829']
            },

            tooltip: {
                backgroundColor: 'rgba(0,0,0,0.5)',
                axisPointer: {
                    type: 'line',
                    lineStyle: {
                        color: '#408829',
                        type: 'dashed'
                    },
                    crossStyle: {
                        color: '#408829'
                    },
                    shadowStyle: {
                        color: 'rgba(200,200,200,0.3)'
                    }
                }
            },

            dataZoom: {
                dataBackgroundColor: '#eee',
                fillerColor: 'rgba(64,136,41,0.2)',
                handleColor: '#408829'
            },
            grid: {
                borderWidth: 0
            },

            categoryAxis: {
                axisLine: {
                    lineStyle: {
                        color: '#408829'
                    }
                },
                splitLine: {
                    lineStyle: {
                        color: ['#eee']
                    }
                }
            },

            valueAxis: {
                axisLine: {
                    lineStyle: {
                        color: '#408829'
                    }
                },
                splitArea: {
                    show: true,
                    areaStyle: {
                        color: ['rgba(250,250,250,0.1)', 'rgba(200,200,200,0.1)']
                    }
                },
                splitLine: {
                    lineStyle: {
                        color: ['#eee']
                    }
                }
            },
            timeline: {
                lineStyle: {
                    color: '#408829'
                },
                controlStyle: {
                    normal: { color: '#408829' },
                    emphasis: { color: '#408829' }
                }
            },

            k: {
                itemStyle: {
                    normal: {
                        color: '#68a54a',
                        color0: '#a9cba2',
                        lineStyle: {
                            width: 1,
                            color: '#408829',
                            color0: '#86b379'
                        }
                    }
                }
            },
            map: {
                itemStyle: {
                    normal: {
                        areaStyle: {
                            color: '#ddd'
                        },
                        label: {
                            textStyle: {
                                color: '#c12e34'
                            }
                        }
                    },
                    emphasis: {
                        areaStyle: {
                            color: '#99d2dd'
                        },
                        label: {
                            textStyle: {
                                color: '#c12e34'
                            }
                        }
                    }
                }
            },
            force: {
                itemStyle: {
                    normal: {
                        linkStyle: {
                            strokeColor: '#408829'
                        }
                    }
                }
            },
            chord: {
                padding: 4,
                itemStyle: {
                    normal: {
                        lineStyle: {
                            width: 1,
                            color: 'rgba(128, 128, 128, 0.5)'
                        },
                        chordStyle: {
                            lineStyle: {
                                width: 1,
                                color: 'rgba(128, 128, 128, 0.5)'
                            }
                        }
                    },
                    emphasis: {
                        lineStyle: {
                            width: 1,
                            color: 'rgba(128, 128, 128, 0.5)'
                        },
                        chordStyle: {
                            lineStyle: {
                                width: 1,
                                color: 'rgba(128, 128, 128, 0.5)'
                            }
                        }
                    }
                }
            },
            gauge: {
                startAngle: 225,
                endAngle: -45,
                axisLine: {
                    show: true,
                    lineStyle: {
                        color: [[0.2, '#86b379'], [0.8, '#68a54a'], [1, '#408829']],
                        width: 8
                    }
                },
                axisTick: {
                    splitNumber: 10,
                    length: 12,
                    lineStyle: {
                        color: 'auto'
                    }
                },
                axisLabel: {
                    textStyle: {
                        color: 'auto'
                    }
                },
                splitLine: {
                    length: 18,
                    lineStyle: {
                        color: 'auto'
                    }
                },
                pointer: {
                    length: '90%',
                    color: 'auto'
                },
                title: {
                    textStyle: {
                        color: '#333'
                    }
                },
                detail: {
                    textStyle: {
                        color: 'auto'
                    }
                }
            },
            textStyle: {
                fontFamily: 'Arial, Verdana, sans-serif'
            }
        };
        var lineChart;
        var GaugeTemp;
        var GaugeMois;
        var GaugeTotalData;
        var ids;
        var sname;
        var lng = "ENG";

        var SetLang = function () {

            return function () {

                $("*[data-langkeyword='tempgauge']").html(lang["tempgauge"][lng]);
                $("*[data-langkeyword='moisgauge']").html(lang["moisgauge"][lng]);
                $("*[data-langkeyword='tempdatatemplate']").html(lang["tempdatatemplate"][lng]);
                $("*[data-langkeyword='moisdatatemplate']").html(lang["moisdatatemplate"][lng]);
                $("*[data-langkeyword='device']").html(lang["device"][lng]);
                //<---- master page content
                $("*[data-langkeyword='dropdowndevicelist']").html(lang["dropdowndevicelist"][lng]);
                $("*[data-langkeyword='menudashboard']").html(lang["menudashboard"][lng]);
                $("*[data-langkeyword='menudevices']").html(lang["menudevices"][lng]);
                $("*[data-langkeyword='submenudevicelist']").html(lang["submenudevicelist"][lng]);
                $("*[data-langkeyword='submenudevicelogs']").html(lang["submenudevicelogs"][lng]);
                $("*[data-langkeyword='submenunewdevice']").html(lang["submenunewdevice"][lng]);
                $("*[data-langkeyword='menusettings']").html(lang["menusettings"][lng]);
                $("*[data-langkeyword='submenuthreshold']").html(lang["submenuthreshold"][lng]);
                $("*[data-langkeyword='submenunotifications']").html(lang["submenunotifications"][lng]);
                $("*[data-langkeyword='submenuphoneconfig']").html(lang["submenuphoneconfig"][lng]);
                $("*[data-langkeyword='leftmenulogin']").each(function (ev) {
                    $(this).attr("title", lang["leftmenulogin"][lng])
                    $(this).attr("data-toggle", "tooltip");
                    $(this).attr("data-placement", "top");
                });
                $("*[data-langkeyword='leftmenulogout']").each(function (ev) {
                    $(this).attr("title", lang["leftmenulogout"][lng])
                });
                $("*[data-langkeyword='righttopprofile']").html(lang["righttopprofile"][lng]);
                $("*[data-langkeyword='righttoplogout']").html(lang["righttoplogout"][lng]);
                //--!> master page content

            };
        }();

        $(document).ready(function () {
            //language option
            SetLang();

            //gauges
            if ($('#GaugeTemp').length) {
                GaugeTemp = echarts.init(document.getElementById('GaugeTemp'), theme);

                GaugeTemp.setOption({
                    tooltip: {
                        formatter: "{a} <br/>{b} : {c}°C"
                    },
                    toolbox: {
                        show: true,
                        feature: {

                            saveAsImage: {
                                show: true,
                                title: "Save Image"
                            }
                        }
                    },
                    series: [{
                        name: 'Sıcaklık',
                        type: 'gauge',
                        center: ['50%', '50%'],
                        startAngle: 140,
                        endAngle: -140,
                        min: 0,
                        max: 100,
                        precision: 0,
                        splitNumber: 10,
                        axisLine: {
                            show: true,
                            lineStyle: {
                                color: [
                                    [0.2, 'skyblue'],
                                    [0.4, 'lightgreen'],
                                    [0.8, 'orange'],
                                    [1, '#ff4500']
                                ],
                                width: 30
                            }
                        },
                        axisTick: {
                            show: true,
                            splitNumber: 5,
                            length: 8,
                            lineStyle: {
                                color: '#eee',
                                width: 1,
                                type: 'solid'
                            }
                        },
                        axisLabel: {
                            show: true,

                            textStyle: {
                                color: '#333'
                            }
                        },
                        splitLine: {
                            show: true,
                            length: 30,
                            lineStyle: {
                                color: '#eee',
                                width: 2,
                                type: 'solid'
                            }
                        },
                        pointer: {
                            length: '80%',
                            width: 8,
                            color: 'auto'
                        },
                        title: {
                            show: true,
                            offsetCenter: ['-65%', -10],
                            textStyle: {
                                color: '#333',
                                fontSize: 15
                            }
                        },
                        detail: {
                            show: true,
                            backgroundColor: 'rgba(0,0,0,0)',
                            borderWidth: 0,
                            borderColor: '#ccc',
                            width: 100,
                            height: 40,
                            offsetCenter: ['-60%', 10],
                            formatter: '{value}°C',
                            textStyle: {
                                color: 'auto',
                                fontSize: 30
                            }
                        },
                        data: [{
                            value: null,
                            name: 'Temperature'
                        }]
                    }]
                });

            }
            if ($('#GaugeMois').length) {
                GaugeMois = echarts.init(document.getElementById('GaugeMois'), theme);

                GaugeMois.setOption({
                    tooltip: {
                        formatter: "{a} <br/>{b} : {c}%"
                    },
                    toolbox: {
                        show: true,
                        feature: {

                            saveAsImage: {
                                show: true,
                                title: "Save Image"
                            }
                        }
                    },
                    series: [{
                        name: 'Nem',
                        type: 'gauge',
                        center: ['50%', '50%'],
                        startAngle: 140,
                        endAngle: -140,
                        min: 0,
                        max: 100,
                        precision: 0,
                        splitNumber: 10,
                        axisLine: {
                            show: true,
                            lineStyle: {
                                color: [
                                    [0.2, 'skyblue'],
                                    [0.4, 'lightgreen'],
                                    [0.8, 'orange'],
                                    [1, '#ff4500']
                                ],
                                width: 30
                            }
                        },
                        axisTick: {
                            show: true,
                            splitNumber: 5,
                            length: 8,
                            lineStyle: {
                                color: '#eee',
                                width: 1,
                                type: 'solid'
                            }
                        },
                        axisLabel: {
                            show: true,

                            textStyle: {
                                color: '#333'
                            }
                        },
                        splitLine: {
                            show: true,
                            length: 30,
                            lineStyle: {
                                color: '#eee',
                                width: 2,
                                type: 'solid'
                            }
                        },
                        pointer: {
                            length: '80%',
                            width: 8,
                            color: 'auto'
                        },
                        title: {
                            show: true,
                            offsetCenter: ['-65%', -10],
                            textStyle: {
                                color: '#333',
                                fontSize: 15
                            }
                        },
                        detail: {
                            show: true,
                            backgroundColor: 'rgba(0,0,0,0)',
                            borderWidth: 0,
                            borderColor: '#ccc',
                            width: 10,
                            height: 40,
                            offsetCenter: ['-60%', 10],
                            formatter: '{value}%',
                            textStyle: {
                                color: 'auto',
                                fontSize: 30
                            }
                        },
                        data: [{
                            value: [],
                            name: 'Moisture'
                        }]
                    }]
                });

            }
            //reference macID
            $.ajax({

                type: 'POST',
                url: '/Api/DeviceConfig',
                dataType: 'json',
                success: function (result) {
                    ids = result[0].macID;
                    //devices
                    $.ajax({

                        type: 'POST',
                        url: '/Api/DeviceConfig',
                        dataType: 'json',
                        data: { 'Macid': ids },
                        success: function (result) {
                            ids = result[0].macID;
                            sname = result[0].name;
                            $('#renamer').append('<h3>' + lang["device"][lng] + ' : ' + sname + '</h3>');
                            for (var i = 0; i < result.length; i++) {
                                $("#mnav").append('<a class="dropdown-item deviceitem" href="#" data-name="' + result[i].name + '" data-macid="' + result[i].macID + '" id="Device' + (i + 1) + '">' + result[i].name + ': ' + result[i].macID + '</a>');
                            }

                            //message box append
                            $.ajax({

                                type: 'POST',
                                url: '/Api/Select_Notify',
                                dataType: 'json',
                                data: { 'Macid': ids },
                                success: function (result) {
                                    for (var i = 0; i < result.length; i++) {
                                        $('#msgBoxTop').append(' <li class="nav-item"><a class="dropdown-item"><span><span>' + result[i].name + '</span><span class="time">' + result[i].createTime + '</span></span><span  class="message">' + result[i].notificationMessage + '</span></a></li>');

                                    }
                                    $('#msgBoxTop').append('<li class="nav-item"><div class="text-center"><a class="dropdown-item" href="/home/Device_Logs"><strong>See All Alerts</strong><i class="fa fa-angle-right"></i></a></div></li>');
                                    $('#msgcount').append(result.length);
                                },
                                failure: function (response) {
                                    alert(response.responseText);
                                },
                                error: function (response) {
                                    alert(response.responseText);
                                }
                            });


                            $(".deviceitem").on('click', function (event) {
                                ids = $(this).data('macid');
                                sname = $(this).data('name');
                                var mydate = moment();
                                var weekDayName = moment(mydate).format('YYYYMMDD');
                                var mySeconddate = moment().subtract(1, 'days');
                                var weekDayName2 = moment(mySeconddate).format('YYYYMMDD');
                                var todaydate = moment().startOf('day').format('YYYYMMDD');

                                init_flot_chart(weekDayName2, weekDayName);
                                init_daterangepicker();
                                init_flot_chart2(weekDayName2, weekDayName);
                                init_daterangepicker2();
                                $('#renamer h3').remove();
                                $('#renamer').append('<h3>' + lang["device"][lng] + ' : ' + sname + '</h3>');
                                $.ajax({
                                    type: 'POST',
                                    url: '/Api/DeviceList_Eject',
                                    data: { 'Macid': ids },
                                    success: function (result) {

                                    }
                                    ,
                                    failure: function (response) {
                                        alert(response.responseText);
                                    },
                                    error: function (response) {
                                        alert(response.responseText);
                                    }

                                }
                                );
                            });

                        },
                        failure: function (response) {
                            alert(response.responseText);
                        },
                        error: function (response) {
                            alert(response.responseText);
                        }

                    });
                    var mydate = moment();
                    var weekDayName = moment(mydate).format('YYYYMMDD');
                    var mySeconddate = moment().subtract(1, 'days');
                    var weekDayName2 = moment(mySeconddate).format('YYYYMMDD');
                    var todaydate = moment().startOf('day').format('YYYYMMDD');
                    gaugeDraw();
                    setInterval(gaugeDraw, 4000);
                    init_flot_chart(weekDayName2, weekDayName);
                    init_daterangepicker();
                    init_flot_chart2(weekDayName2, weekDayName);
                    init_daterangepicker2();



                },
                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            });
            $.ajax({
                type: 'POST',
                url: '/Api/Profile_UserData',
                dataType: 'json',
                data: { 'Macid': ids },
                success: function (result) {
                    $('#welcome h2').append(result[0].name + " " + result[0].surname);
                },
                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            });

        });

        function gaugeDraw(IDcustomer) {
            $.ajax({
                type: 'Get',
                url: '/Api/Charts',
                dataType: 'json',
                contentType: 'application/json; charset=utf-8',
                data: { 'Macid': ids },
                success: function (result) {
                    var A = moment().format("H:mm");
                    var B = result[0].createTime

                    //if (A == B) {
                    //    GaugeTemp.setOption({ series: [{ data: [{ value: result[0].temp, name: 'Sıcaklık' }] }] });
                    //    GaugeMois.setOption({ series: [{ data: [{ value: result[0].mois, name: 'Nem' }] }] });
                    //}
                    //else {
                    //    GaugeTemp.setOption({ series: [{ data: [{ value: 0, name: 'Sıcaklık' }] }] });
                    //    GaugeMois.setOption({ series: [{ data: [{ value: 0, name: 'Nem' }] }] });
                    //}

                    if (result[0] == null) {
                        GaugeTemp.setOption({ series: [{ data: [{ value: 0, name: '' }] }] });
                        GaugeMois.setOption({ series: [{ data: [{ value: 0, name: '' }] }] });
                    }
                    else {
                        GaugeTemp.setOption({ series: [{ data: [{ value: result[0].temp, name: '' }] }] });
                        GaugeMois.setOption({ series: [{ data: [{ value: result[0].mois, name: '' }] }] });
                    }
                },
                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }


            });

        };

        function init_flot_chart(StartDate, EndDate) {

            $.ajax({
                type: 'POST',
                url: '/Api/Charts_Line',
                data: { 'startDate': StartDate, 'endDate': EndDate, 'MacID': ids },
                dataType: "json",
                success: function (result) {
                    if (typeof ($.plot) === 'undefined') { return; }

                    console.log(result);

                    var chart_plot_03_data = [];
                    var namelabel = [];
                    
                    for (var i = 0; i < result.length; i++) {
                        chart_plot_03_data.push([new Date(result[result.length - 1 - i].createTime), result[result.length - 1 - i].temp]);
                        
                    }
                    namelabel.push([lang["tempgraph_label"][lng]]);
                    
                    var chart_plot_03_settings = {
                        xaxis: {
                            mode: "time",
                            timeformat: "%d/%m/%y ,   %H:%M",
                            timezone: "browser",
                            minTickSize: [1, "hour"],
                            twelveHourClock: true,
                            timeBase: "milliseconds"
                        },
                        series: {
                            curvedLines: {
                                apply: true,
                                active: true,
                                monotonicFit: true
                            }
                        },
                        TickSize: [1, "hour"],
                        colors: ["#26B99A"],
                        grid: {
                            borderWidth: {
                                top: 0,
                                right: 0,
                                bottom: 1,
                                left: 1
                            },
                            borderColor: {
                                bottom: "#7F8790",
                                left: "#7F8790"
                            }
                        }
                    };
                    if ($("#chart_plot_03").length) {
                        $.plot($("#chart_plot_03"), [{
                            label: namelabel,
                            data: chart_plot_03_data,
                            lines: {
                                fillColor: "rgba(150, 202, 89, 0.12)"
                            },
                            points: {
                                fillColor: "#fff"
                            }
                        }], chart_plot_03_settings);

                    };

                }//here


                ,

                failure: function (response) {
                    console.log(response);
                    alert(response.responseText);
                },
                error: function (response) {
                    console.log(response);
                    alert(response.responseText);
                }


            }
            );


        };


        function init_daterangepicker(start, end) {
            if (typeof ($.fn.daterangepicker) === 'undefined') { return; }

            var cb = function (start, end, label) {
                //2 Line below uncommented. (s)
                $('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'));
                init_flot_chart(start.format('YYYYMMDD'), end.format('YYYYMMDD')); //hhmmss //'MM/DD/YYYY'



            };

            var optionSet1 = {
                startDate: moment().subtract(1, 'days'),
                endDate: moment(),
                minDate: '01/01/2012',
                maxDate: '12/31/2019',
                dateLimit: {
                    days: 60
                },
                showDropdowns: true,
                showWeekNumbers: true,
                timePicker: false,
                timePickerIncrement: 1,
                timePicker12Hour: true,
                ranges: {
                    'Son 24 Saat': [moment().subtract(1, 'days'), moment()],
                    'Son 7 Gün': [moment().subtract(6, 'days'), moment()],
                    'Son 30 Gün': [moment().subtract(29, 'days'), moment()],
                    'Önceki Ay': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
                },
                opens: 'left',
                buttonClasses: ['btn btn-default'],
                applyClass: 'btn-small btn-primary',
                cancelClass: 'btn-small',
                format: 'YYYY/DD/MM', //'MM/DD/YYYY'
                separator: ' to ',
                locale: {
                    applyLabel: 'Submit',
                    cancelLabel: 'Clear',
                    fromLabel: 'From',
                    toLabel: 'To',
                    customRangeLabel: 'Custom',
                    daysOfWeek: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
                    monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
                    firstDay: 1
                }
            };

            $('#reportrange span').html(moment().subtract(1, 'days').format('MMMM D, YYYY') + ' - ' + moment().format('MMMM D, YYYY'));
            $('#reportrange').daterangepicker(optionSet1, cb);
            $('#reportrange').on('show.daterangepicker', function () {
                console.log("show event fired");
            });
            $('#reportrange').on('hide.daterangepicker', function () {
                console.log("hide event fired");
            });
            $('#reportrange').on('apply.daterangepicker', function (ev, picker) {
                console.log("apply event fired, start/end dates are " + picker.startDate.format('MMMM D, YYYY') + " to " + picker.endDate.format('MMMM D, YYYY'));
            });
            $('#reportrange').on('cancel.daterangepicker', function (ev, picker) {
                console.log("cancel event fired");
            });
            $('#options1').click(function () {
                $('#reportrange').data('daterangepicker').setOptions(optionSet1, cb);
            });
            $('#options2').click(function () {
                $('#reportrange').data('daterangepicker').setOptions(optionSet2, cb);
            });
            $('#destroy').click(function () {
                $('#reportrange').data('daterangepicker').remove();
            });

        }


        //flot chart2
        function init_flot_chart2(StartDate, EndDate) {

            $.ajax({
                type: 'POST',
                url: '/Api/Charts_Line',
                data: { 'startDate': StartDate, 'endDate': EndDate, 'MacID': ids },
                dataType: "json",
                success: function (result) {
                    if (typeof ($.plot) === 'undefined') { return; }

                    var chart_plot_04_data = [];
                    var namelabel2 = [];
                    
                    console.log(result);
                    for (var i = 0; i < result.length; i++) {
                        chart_plot_04_data.push([new Date(result[result.length - 1 - i].createTime), result[result.length - 1 - i].mois]);
                    }
                    namelabel2.push([lang["moisgraph_label"][lng]]);
                    var chart_plot_04_settings = {
                        xaxis: {
                            mode: "time",
                            timeformat: "%d/%m/%y ,   %H:%M",
                            timezone: "browser",
                            minTickSize: [1, "hour"],
                            twelveHourClock: true,
                            timeBase: "milliseconds"
                        },
                        series: {
                            curvedLines: {
                                apply: true,
                                active: true,
                                monotonicFit: true
                            }
                        },
                        TickSize: [1, "hour"],
                        colors: ["#26B99A"],
                        grid: {
                            borderWidth: {
                                top: 0,
                                right: 0,
                                bottom: 1,
                                left: 1
                            },
                            borderColor: {
                                bottom: "#7F8790",
                                left: "#7F8790"
                            }
                        }
                    };
                    if ($("#chart_plot_04").length) {
                        $.plot($("#chart_plot_04"), [{
                            label: namelabel2,
                            data: chart_plot_04_data,
                            lines: {
                                fillColor: "rgba(150, 202, 89, 0.12)"
                            },
                            points: {
                                fillColor: "#fff"
                            }
                        }], chart_plot_04_settings);

                    };

                }//here


                ,

                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }


            }
            );


        };


        function init_daterangepicker2(start, end) {

            if (typeof ($.fn.daterangepicker) === 'undefined') { return; }

            var cb = function (start, end, label) {
                //2 Line below uncommented. (s)
                console.log(start.toISOString(), end.toISOString(), label);
                $('#reportrange2 span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'));
                init_flot_chart2(start.format('YYYYMMDD'), end.format('YYYYMMDD')); //hhmmss //'MM/DD/YYYY'

            };

            var optionSet1 = {
                startDate: moment().subtract(1, 'days'),
                endDate: moment(),
                minDate: '01/01/2012',
                maxDate: '12/31/2019',
                dateLimit: {
                    days: 60
                },
                showDropdowns: true,
                showWeekNumbers: true,
                timePicker: false,
                timePickerIncrement: 1,
                timePicker12Hour: true,
                ranges: {
                    'Son 24 Saat': [moment().subtract(1, 'days'), moment()],
                    'Son 7 Gün': [moment().subtract(6, 'days'), moment()],
                    'Son 30 Gün': [moment().subtract(29, 'days'), moment()],
                    'Önceki Ay': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
                },
                opens: 'left',
                buttonClasses: ['btn btn-default'],
                applyClass: 'btn-small btn-primary',
                cancelClass: 'btn-small',
                format: 'YYYY/DD/MM', //'MM/DD/YYYY'
                separator: ' to ',
                locale: {
                    applyLabel: 'Submit',
                    cancelLabel: 'Clear',
                    fromLabel: 'From',
                    toLabel: 'To',
                    customRangeLabel: 'Custom',
                    daysOfWeek: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
                    monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
                    firstDay: 1
                }
            };

            $('#reportrange2 span').html(moment().subtract(1, 'days').format('MMMM D, YYYY') + ' - ' + moment().format('MMMM D, YYYY'));
            $('#reportrange2').daterangepicker(optionSet1, cb);
            $('#reportrange2').on('show.daterangepicker', function () {
                console.log("show event fired");
            });
            $('#reportrange2').on('hide.daterangepicker', function () {
                console.log("hide event fired");
            });
            $('#reportrange2').on('apply.daterangepicker', function (ev, picker) {
                console.log("apply event fired, start/end dates are " + picker.startDate.format('MMMM D, YYYY') + " to " + picker.endDate.format('MMMM D, YYYY'));
            });
            $('#reportrange2').on('cancel.daterangepicker', function (ev, picker) {
                console.log("cancel event fired");
            });
            $('#options1').click(function () {
                $('#reportrange2').data('daterangepicker').setOptions(optionSet1, cb);
            });
            $('#options2').click(function () {
                $('#reportrange2').data('daterangepicker').setOptions(optionSet2, cb);
            });
            $('#destroy').click(function () {
                $('#reportrange2').data('daterangepicker').remove();
            });

        }




    </script>

</body>
</html>